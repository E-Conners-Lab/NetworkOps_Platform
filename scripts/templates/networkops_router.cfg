!
! NetworkOps Router Configuration Template
! Apply this config to enable dashboard integration
!
! Replace <VARIABLES> with your values:
!   <MGMT_IP>           - Router management IP (e.g., 10.255.255.50)
!   <COLLECTOR_IP>      - NetworkOps server IP (e.g., 203.0.113.65)
!
! ============================================================================
! REQUIRED: NETCONF-YANG (for health checks and API access)
! ============================================================================
!
netconf-yang
netconf-yang feature candidate-datastore
!
! ============================================================================
! OPTIONAL: MDT Telemetry (for real-time interface/CPU/memory stats)
! ============================================================================
!
telemetry receiver protocol grpc-tcp
!
! Subscription 100: Interface statistics (every 5 seconds)
telemetry ietf subscription 100
 encoding encode-kvgpb
 filter xpath /interfaces-ios-xe-oper:interfaces/interface/statistics
 source-address <MGMT_IP>
 stream yang-push
 update-policy periodic 5000
 receiver ip address <COLLECTOR_IP> 57000 protocol grpc-tcp
!
! Subscription 101: CPU utilization (every 5 seconds)
telemetry ietf subscription 101
 encoding encode-kvgpb
 filter xpath /process-cpu-ios-xe-oper:cpu-usage/cpu-utilization/five-seconds
 source-address <MGMT_IP>
 stream yang-push
 update-policy periodic 5000
 receiver ip address <COLLECTOR_IP> 57000 protocol grpc-tcp
!
! Subscription 102: Memory statistics (every 5 seconds)
telemetry ietf subscription 102
 encoding encode-kvgpb
 filter xpath /memory-ios-xe-oper:memory-statistics/memory-statistic
 source-address <MGMT_IP>
 stream yang-push
 update-policy periodic 5000
 receiver ip address <COLLECTOR_IP> 57000 protocol grpc-tcp
!
! Subscription 103: Interface state changes (on-change)
telemetry ietf subscription 103
 encoding encode-kvgpb
 filter xpath /interfaces-ios-xe-oper:interfaces/interface/oper-status
 stream yang-push
 update-policy on-change
 receiver ip address <COLLECTOR_IP> 57000 protocol grpc-tcp
!
! ============================================================================
! OPTIONAL: Security Hardening
! ============================================================================
!
service password-encryption
no ip http server
no ip http secure-server
ip ssh version 2
!
! ============================================================================
! Verification Commands
! ============================================================================
!
! Check NETCONF status:
!   show platform software yang-management process state
!   show netconf-yang sessions
!
! Check telemetry subscriptions:
!   show telemetry ietf subscription all
!   show telemetry receiver all
!
! Test from NetworkOps server:
!   python -c "from ncclient import manager; m=manager.connect(host='<MGMT_IP>',port=830,username='admin',password='admin',hostkey_verify=False); print('OK')"
!
end
