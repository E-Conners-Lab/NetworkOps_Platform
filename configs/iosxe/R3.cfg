version 17.13
service tcp-keepalives-in
service tcp-keepalives-out
service timestamps debug datetime msec localtime show-timezone
service timestamps log datetime msec localtime show-timezone
service password-encryption
platform qfp utilization monitor load 80
platform punt-keepalive disable-kernel-core
platform sslvpn use-pd
platform console serial
!
hostname R3
!
boot-start-marker
boot-end-marker
!
!
vrf definition CUSTOMER-A
 rd 65000:1
 !
 address-family ipv4
  route-target export 65000:1
  route-target import 65000:1
 exit-address-family
!
logging buffered 16384 informational
no logging console
no logging monitor
aaa new-model
!
!
aaa authentication login default local
aaa authorization exec default local
!
!
aaa session-id common
clock timezone EST -5 0
clock summer-time EDT recurring
!
!
!
!
!
!
ip multicast-routing distributed
!
!
!
!
!
!
ip domain name mcp.lab
ip dhcp excluded-address 10.3.0.1 10.3.0.10
!
ip dhcp pool LAN3
 network 10.3.0.0 255.255.255.0
 default-router 10.3.0.1
 dns-server 1.1.1.1 8.8.8.8
 domain-name mcp.lab
 lease 7
!
!
!
login on-failure log
login on-success log
!
!
subscriber templating
ipv6 unicast-routing
!
!
!
!
!
!
!
!
!
!
!
!
pae
!
!
crypto pki trustpoint TP-self-signed-3399626555
 enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-3399626555
 revocation-check none
 rsakeypair TP-self-signed-3399626555
 hash sha256
!
crypto pki trustpoint SLA-TrustPoint
 enrollment pkcs12
 revocation-check crl
 hash sha256
!
crypto pki trustpoint TP-self-signed-2416998549
 enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-2416998549
 revocation-check none
 rsakeypair TP-self-signed-2416998549
 hash sha256
!
!
crypto pki certificate chain TP-self-signed-3399626555
 certificate self-signed 01
  30820330 30820218 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030
  31312F30 2D060355 04030C26 494F532D 53656C66 2D536967 6E65642D 43657274
  69666963 6174652D 33333939 36323635 3535301E 170D3235 31323239 30373135
  30365A17 0D333531 32323930 37313530 365A3031 312F302D 06035504 030C2649
  4F532D53 656C662D 5369676E 65642D43 65727469 66696361 74652D33 33393936
  32363535 35308201 22300D06 092A8648 86F70D01 01010500 0382010F 00308201
  0A028201 0100BFC1 A37DAB96 656C48BD 464A4ACB 1070B3B9 24CAC4DD 783347CA
  784116FA 3BCD56BD 6D699BA7 6608A17F DF482EE7 8B7EF575 C4BB90B1 5C4F1E6F
  CDC122D1 54A1439F 039B7FAF D1B6E9DB FA50B853 6E212093 8776BE0D 95AC0B31
  14069D1D 377B05D6 2AD46FA1 ED5B08EA 8456AAAE 8ACF2180 DA51E4ED 37841444
  F27D513B 0935B3DD 3AC12FA4 E7AB757C C6635C6D 71E8C562 3CBF7C29 3C4373E1
  3DE8185B 1826D3E9 C3E9353F 56AFB59E 240ABEFB D53D5028 C742E41C 7EB40907
  049216A8 E2090E0E 6269DE39 793B5064 266B478B 1690FC43 9181AE7A A92013FE
  B646661D D5913EEC 2071487C 1257E3DE EE0216AA 99B24367 478FC990 C2EE442D
  90903B14 18870203 010001A3 53305130 1D060355 1D0E0416 0414ABD5 8B962215
  D21C0013 B22600A6 A51774F1 A912301F 0603551D 23041830 168014AB D58B9622
  15D21C00 13B22600 A6A51774 F1A91230 0F060355 1D130101 FF040530 030101FF
  300D0609 2A864886 F70D0101 0B050003 82010100 39989690 57ABECA6 C89D0FD0
  4A94B265 026D6592 A790F509 4C7DA274 1B1BE7AF 47D1901A C64F625E B19FAAF0
  C44A5758 68E0D044 8FBAB735 1BF98029 AC4813E7 E97C90AD 4CDFC083 7E56365A
  D990E248 9E59C090 AE1D2DB5 83AC052A 93CE36AE 3B76D5A4 BC644DCB 03CA7AD8
  5DA09ECF 94789048 28E4348C EC1A1B5E 500F07F5 F0443BF1 CB1EB6D4 08B55122
  796B4DD1 D12E6C9D 6965F78C A70C238B 90A3A720 AA5DBD03 0098925D D18CABD2
  0071A7CD 0D671D02 7838CBD4 7E5B1AB4 066F00AE 64396724 D0C4B075 95D2BD57
  D86E62FD 09EDF942 94C5F0C0 A6B6E479 86AE3A9A 24FE51AF 0CFA6D50 C9E61398
  E64E855B CCD783A9 FD7D4116 FF08A064 1F9A33CA
  	quit
crypto pki certificate chain SLA-TrustPoint
 certificate ca 01
  30820321 30820209 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030
  32310E30 0C060355 040A1305 43697363 6F312030 1E060355 04031317 43697363
  6F204C69 63656E73 696E6720 526F6F74 20434130 1E170D31 33303533 30313934
  3834375A 170D3338 30353330 31393438 34375A30 32310E30 0C060355 040A1305
  43697363 6F312030 1E060355 04031317 43697363 6F204C69 63656E73 696E6720
  526F6F74 20434130 82012230 0D06092A 864886F7 0D010101 05000382 010F0030
  82010A02 82010100 A6BCBD96 131E05F7 145EA72C 2CD686E6 17222EA1 F1EFF64D
  CBB4C798 212AA147 C655D8D7 9471380D 8711441E 1AAF071A 9CAE6388 8A38E520
  1C394D78 462EF239 C659F715 B98C0A59 5BBB5CBD 0CFEBEA3 700A8BF7 D8F256EE
  4AA4E80D DB6FD1C9 60B1FD18 FFC69C96 6FA68957 A2617DE7 104FDC5F EA2956AC
  7390A3EB 2B5436AD C847A2C5 DAB553EB 69A9A535 58E9F3E3 C0BD23CF 58BD7188
  68E69491 20F320E7 948E71D7 AE3BCC84 F10684C7 4BC8E00F 539BA42B 42C68BB7
  C7479096 B4CB2D62 EA2F505D C7B062A4 6811D95B E8250FC4 5D5D5FB8 8F27D191
  C55F0D76 61F9A4CD 3D992327 A8BB03BD 4E6D7069 7CBADF8B DF5F4368 95135E44
  DFC7C6CF 04DD7FD1 02030100 01A34230 40300E06 03551D0F 0101FF04 04030201
  06300F06 03551D13 0101FF04 05300301 01FF301D 0603551D 0E041604 1449DC85
  4B3D31E5 1B3E6A17 606AF333 3D3B4C73 E8300D06 092A8648 86F70D01 010B0500
  03820101 00507F24 D3932A66 86025D9F E838AE5C 6D4DF6B0 49631C78 240DA905
  604EDCDE FF4FED2B 77FC460E CD636FDB DD44681E 3A5673AB 9093D3B1 6C9E3D8B
  D98987BF E40CBD9E 1AECA0C2 2189BB5C 8FA85686 CD98B646 5575B146 8DFC66A8
  467A3DF4 4D565700 6ADF0F0D CF835015 3C04FF7C 21E878AC 11BA9CD2 55A9232C
  7CA7B7E6 C1AF74F6 152E99B7 B1FCF9BB E973DE7F 5BDDEB86 C71E3B49 1765308B
  5FB0DA06 B92AFE7F 494E8A9E 07B85737 F3A58BE1 1A48A229 C37C1E69 39F08678
  80DDCD16 D6BACECA EEBC7CF9 8428787B 35202CDC 60E4616A B623CDBD 230E3AFB
  418616A9 4093E049 4D10AB75 27E86F73 932E35B5 8862FDAE 0275156F 719BB2F0
  D697DF7F 28
  	quit
crypto pki certificate chain TP-self-signed-2416998549
!
!
!
!
!
!
!
!
!
license udi pid C8000V sn XXXXXXXXXXXX
license boot level network-advantage addon dna-advantage
memory free low-watermark processor 225161
diagnostic bootup level minimal
!
!
spanning-tree extend system-id
!
!
enable secret 9 $9$REDACTED
!
username admin privilege 15 secret 9 $9$REDACTED
username readonly secret 9 $9$REDACTED
!
redundancy
bfd-template single-hop BFD-OSPF
 interval min-tx 100 min-rx 100 multiplier 3
!
!
!
!
!
!
cdp run
!
!
track 1 ip sla 1 reachability
lldp run
!
class-map match-any BULK-DATA
 match dscp af11
class-map match-any CRITICAL-DATA
 match dscp af31
 match dscp cs3
class-map match-any VIDEO
 match dscp af41
 match dscp af42
class-map match-any VOICE
 match dscp ef
 match dscp cs5
!
policy-map WAN-EGRESS
 class VOICE
  priority percent 10
 class VIDEO
  bandwidth percent 20
 class CRITICAL-DATA
  bandwidth percent 25
 class BULK-DATA
  bandwidth percent 15
 class class-default
  bandwidth percent 30
policy-map WAN-SHAPE
 class class-default
  shape average 100000000
  service-policy WAN-EGRESS
!
interface Loopback0
 ip address 198.51.100.3 255.255.255.255
 ip pim sparse-mode
 ip igmp version 3
 ip ospf network point-to-point
 ipv6 address 2001:DB8::3/128
!
interface Loopback100
 vrf forwarding CUSTOMER-A
 ip address 10.100.3.3 255.255.255.255
!
interface Tunnel99
 description GRE to Containerlab edge1
 ip address 10.99.99.1 255.255.255.252
 tunnel source GigabitEthernet4
 tunnel destination 172.20.20.4
!
interface Tunnel100
 description DMVPN-SPOKE
 ip address 172.16.0.3 255.255.255.0
 no ip redirects
 ip pim sparse-mode
 ip nhrp network-id 100
 ip nhrp nhs 172.16.0.1 nbma 198.51.100.1 multicast
 ipv6 address 2001:DB8:100::3/64
 ipv6 nhrp network-id 100
 ipv6 nhrp nhs 2001:DB8:100::1 nbma 198.51.100.1 multicast
 tunnel source Loopback0
 tunnel mode gre multipoint
 tunnel key 100
!
interface GigabitEthernet1
 description UNUSED - DISABLED
 no ip address
 ip pim sparse-mode
 ip ospf network point-to-point
 shutdown
 negotiation auto
 cdp enable
 bfd template BFD-OSPF
 no mop enabled
 no mop sysid
!
interface GigabitEthernet2
 ip address 10.0.13.2 255.255.255.252
 ip pim sparse-mode
 ip ospf network point-to-point
 negotiation auto
 cdp enable
 ipv6 address 2001:DB8:13::2/64
 ospfv3 network point-to-point
 ospfv3 1 ipv6 area 0
 bfd template BFD-OSPF
 no mop enabled
 no mop sysid
!
interface GigabitEthernet3
 description LAN Interface
 ip address 10.3.0.1 255.255.255.0
 ip pim sparse-mode
 ip igmp version 3
 negotiation auto
 cdp enable
 ipv6 address 2001:DB8:3::1/64
 no mop enabled
 no mop sysid
!
interface GigabitEthernet4
 ip address 10.255.255.13 255.255.255.0
 negotiation auto
 no mop enabled
 no mop sysid
!
interface GigabitEthernet5
 description Link to R4 Gi5
 ip address 10.0.34.1 255.255.255.252
 ip pim sparse-mode
 ip ospf network point-to-point
 ip ospf 1 area 0
 negotiation auto
 cdp enable
 ipv6 address 2001:DB8:34::1/64
 ospfv3 network point-to-point
 ospfv3 1 ipv6 area 0
 no mop enabled
 no mop sysid
!
router eigrp DMVPN
 !
 address-family ipv4 unicast autonomous-system 100
  !
  topology base
  exit-af-topology
  network 10.3.0.0 0.0.0.255
  network 172.16.0.0 0.0.0.255
 exit-address-family
 !
 address-family ipv6 unicast autonomous-system 100
  !
  topology base
  exit-af-topology
 exit-address-family
!
router ospfv3 1
 router-id 198.51.100.3
 !
 address-family ipv6 unicast
 exit-address-family
!
router ospf 1
 router-id 198.51.100.3
 area 3 stub
 passive-interface GigabitEthernet3
 network 10.0.13.0 0.0.0.3 area 0
 network 10.0.34.0 0.0.0.3 area 0
 network 10.3.0.0 0.0.0.255 area 3
 network 198.51.100.3 0.0.0.0 area 3
 bfd all-interfaces
!
router bgp 65000
 bgp router-id 198.51.100.3
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
 neighbor 172.20.20.5 remote-as 65100
 neighbor 172.20.20.5 description edge1-Containerlab
 neighbor 172.20.20.5 ebgp-multihop 5
 neighbor 198.51.100.1 remote-as 65000
 neighbor 198.51.100.1 update-source Loopback0
 !
 address-family ipv4
  neighbor 172.20.20.5 activate
  neighbor 198.51.100.1 activate
  neighbor 198.51.100.1 next-hop-self
  network 10.3.0.0 mask 255.255.255.0
  network 198.51.100.3 mask 255.255.255.255
 exit-address-family
 !
 address-family ipv6
  neighbor 198.51.100.1 activate
  network 2001:DB8::3/128
  network 2001:DB8:3::/64
 exit-address-family
 !
!
ip route 0.0.0.0 0.0.0.0 10.255.255.1
ip route 10.100.1.0 255.255.255.0 172.20.20.4 250
ip route 10.100.2.0 255.255.255.0 172.20.20.4 250
ip route 10.200.0.0 255.255.255.252 172.20.20.4 250
ip route 10.255.0.1 255.255.255.255 172.20.20.4 250
ip route 10.255.0.2 255.255.255.255 172.20.20.4 250
ip route 172.20.20.0 255.255.255.0 10.255.255.1
ip route 192.168.64.0 255.255.255.0 203.0.113.65
ntp authenticate
ntp source Loopback0
ntp server 1.1.1.1 source Loopback0
ntp server 10.255.255.1
ntp server pool.ntp.org
!
ip forward-protocol nd
!
ip pim ssm default
no ip http server
ip http authentication local
no ip http secure-server
ip ssh bulk-mode 131072
!
!
ip access-list standard SNMP-ACL
 10 permit 10.255.255.0 0.0.0.255
 20 permit 203.0.113.0 0.0.0.255
 30 deny any log
ip access-list standard VTY-ACL
 10 permit 10.255.255.0 0.0.0.255
 20 permit 203.0.113.0 0.0.0.255
 30 deny any log
!
ip sla 1
 icmp-echo 1.1.1.1 source-ip 3.3.3.3
  frequency 5
ip sla schedule 1 life forever start-time now
logging origin-id hostname
logging source-interface GigabitEthernet4
logging host 203.0.113.57 transport tcp port 5514 session-id hostname
!
!
!
!
!
!
control-plane
!
!
mgcp behavior rsip-range tgcp-only
mgcp behavior comedia-role none
mgcp behavior comedia-check-media-src disable
mgcp behavior comedia-sdp-force disable
!
mgcp profile default
!
!
!
!
!
banner login ^CC AUTHORIZED ACCESS ONLY - All activities are monitored ^C
!
line con 0
 exec-timeout 0 0
 stopbits 1
line aux 0
 no exec
line vty 0 4
 access-class VTY-ACL in
 exec-timeout 0 0
 transport input ssh
line vty 5 15
 transport input ssh
!
!
!
!
!
!
!
telemetry ietf subscription 100
 encoding encode-kvgpb
 filter xpath /interfaces-ios-xe-oper:interfaces/interface/statistics
 source-address 10.255.255.13
 stream yang-push
 update-policy periodic 5000
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
telemetry ietf subscription 101
 encoding encode-kvgpb
 filter xpath /process-cpu-ios-xe-oper:cpu-usage/cpu-utilization/five-seconds
 source-address 10.255.255.13
 stream yang-push
 update-policy periodic 5000
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
telemetry ietf subscription 102
 encoding encode-kvgpb
 filter xpath /memory-ios-xe-oper:memory-statistics/memory-statistic
 source-address 10.255.255.13
 stream yang-push
 update-policy periodic 5000
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
telemetry ietf subscription 103
 encoding encode-kvgpb
 filter xpath /interfaces-ios-xe-oper:interfaces/interface/oper-status
 stream yang-push
 update-policy on-change
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
telemetry ietf subscription 104
 encoding encode-kvgpb
 filter xpath /process-cpu-ios-xe-oper:cpu-usage/cpu-utilization/five-seconds
 stream yang-push
 update-policy periodic 10000
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
telemetry ietf subscription 105
 encoding encode-kvgpb
 filter xpath /memory-ios-xe-oper:memory-statistics/memory-statistic
 stream yang-push
 update-policy periodic 30000
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
netconf-yang
restconf
end