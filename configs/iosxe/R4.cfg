version 17.13
service tcp-keepalives-in
service tcp-keepalives-out
service timestamps debug datetime msec localtime show-timezone
service timestamps log datetime msec localtime show-timezone
service password-encryption
platform qfp utilization monitor load 80
platform punt-keepalive disable-kernel-core
platform sslvpn use-pd
platform console serial
!
hostname R4
!
boot-start-marker
boot-end-marker
!
!
vrf definition CUSTOMER-A
 rd 65000:1
 !
 address-family ipv4
  route-target export 65000:1
  route-target import 65000:1
 exit-address-family
!
logging buffered 16384 informational
no logging console
no logging monitor
aaa new-model
!
!
aaa authentication login default local
aaa authorization exec default local
!
!
aaa session-id common
clock timezone EST -5 0
clock summer-time EDT recurring
!
!
!
!
!
!
ip multicast-routing distributed
!
!
!
!
!
!
ip domain name mcp.lab
ip dhcp excluded-address 10.4.0.1 10.4.0.10
!
ip dhcp pool LAN4
 network 10.4.0.0 255.255.255.0
 default-router 10.4.0.1
 dns-server 1.1.1.1 8.8.8.8
 domain-name mcp.lab
 lease 7
!
!
!
login on-failure log
login on-success log
!
!
subscriber templating
ipv6 unicast-routing
!
!
!
!
!
!
!
!
!
!
!
!
pae
!
!
crypto pki trustpoint TP-self-signed-421990093
 enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-421990093
 revocation-check none
 rsakeypair TP-self-signed-421990093
 hash sha256
!
crypto pki trustpoint SLA-TrustPoint
 enrollment pkcs12
 revocation-check crl
 hash sha256
!
crypto pki trustpoint TP-self-signed-3740463209
 enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-3740463209
 revocation-check none
 rsakeypair TP-self-signed-3740463209
 hash sha256
!
!
crypto pki certificate chain TP-self-signed-421990093
 certificate self-signed 01
  3082032E 30820216 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030
  30312E30 2C060355 04030C25 494F532D 53656C66 2D536967 6E65642D 43657274
  69666963 6174652D 34323139 39303039 33301E17 0D323531 32323930 37313630
  385A170D 33353132 32393037 31363038 5A303031 2E302C06 03550403 0C25494F
  532D5365 6C662D53 69676E65 642D4365 72746966 69636174 652D3432 31393930
  30393330 82012230 0D06092A 864886F7 0D010101 05000382 010F0030 82010A02
  82010100 DEF10211 89ACD0A1 C7407BB2 E5F5D12E 5C247109 DD864497 E12562BA
  52D341C1 CF8C32D7 4969319B D8469991 3F476F4F 6584C864 FF8CCD30 2011B977
  65924622 7D8BB16C DD63866D A69B52AD C03014A1 B78ED4D9 6B3E8276 C892338F
  785561C1 102E098E 73656B61 51703EDC DED70BA1 AE3AF50A B08701ED 44868C27
  73AADCCD 8006ACDC 09ED2371 4DFDCC90 90F89E7A 5C340DC4 A59958AE 278E8944
  ECB2B931 1581E817 D493E798 F4AB6781 84EB1366 7D1E7C3D FEF357AA CB7C4CEC
  4D2C6516 8446360A 1FCEC554 56EB5370 4060CD04 2BA48809 43E1F632 6101687E
  B3DF9AC7 E0C56EDE AB21593E 61262C42 545BF0FA 89B3E583 C5773ED7 23B36F57
  29108241 02030100 01A35330 51301D06 03551D0E 04160414 995C7F01 AC7B5DDE
  4AF15A07 B58F5F9C 1819D024 301F0603 551D2304 18301680 14995C7F 01AC7B5D
  DE4AF15A 07B58F5F 9C1819D0 24300F06 03551D13 0101FF04 05300301 01FF300D
  06092A86 4886F70D 01010B05 00038201 01007C95 E528BAB0 1E3B17B2 E4D3D60E
  2479A013 C33585E8 EE1FB356 525F30C0 3841EF26 069BFA0F C8042322 9616A2C6
  425D49B3 1DA1A0D7 AA8187FF EE328558 A9427001 44903B41 DC1A6F1D 3A8FD4E5
  167857F5 9AE97896 B4120CFB 3DC0DB30 7AD1556D 763E93EB F354717C 8A4DB72F
  FB9A7B51 C3291615 EF0B4D66 F277A6FA 61B166BF AAD6693A A700DC11 BE9CA60E
  D1F40F8B 210BB97F BB668AE3 FF967992 63B41560 BFA33FEA 023860A0 3D91F264
  08BB49C6 1721AFFD 294C55C9 F08E6833 D0126B47 EF5A55AC 62FF1447 21178F53
  FEAFFA2C 58844169 ED0BC132 B233022D 4AB8B7D2 356BE7F5 F594E31C 9494A427
  57CB25ED E8E4B15A B4D36261 51528FCD AB3E
  	quit
crypto pki certificate chain SLA-TrustPoint
 certificate ca 01
  30820321 30820209 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030
  32310E30 0C060355 040A1305 43697363 6F312030 1E060355 04031317 43697363
  6F204C69 63656E73 696E6720 526F6F74 20434130 1E170D31 33303533 30313934
  3834375A 170D3338 30353330 31393438 34375A30 32310E30 0C060355 040A1305
  43697363 6F312030 1E060355 04031317 43697363 6F204C69 63656E73 696E6720
  526F6F74 20434130 82012230 0D06092A 864886F7 0D010101 05000382 010F0030
  82010A02 82010100 A6BCBD96 131E05F7 145EA72C 2CD686E6 17222EA1 F1EFF64D
  CBB4C798 212AA147 C655D8D7 9471380D 8711441E 1AAF071A 9CAE6388 8A38E520
  1C394D78 462EF239 C659F715 B98C0A59 5BBB5CBD 0CFEBEA3 700A8BF7 D8F256EE
  4AA4E80D DB6FD1C9 60B1FD18 FFC69C96 6FA68957 A2617DE7 104FDC5F EA2956AC
  7390A3EB 2B5436AD C847A2C5 DAB553EB 69A9A535 58E9F3E3 C0BD23CF 58BD7188
  68E69491 20F320E7 948E71D7 AE3BCC84 F10684C7 4BC8E00F 539BA42B 42C68BB7
  C7479096 B4CB2D62 EA2F505D C7B062A4 6811D95B E8250FC4 5D5D5FB8 8F27D191
  C55F0D76 61F9A4CD 3D992327 A8BB03BD 4E6D7069 7CBADF8B DF5F4368 95135E44
  DFC7C6CF 04DD7FD1 02030100 01A34230 40300E06 03551D0F 0101FF04 04030201
  06300F06 03551D13 0101FF04 05300301 01FF301D 0603551D 0E041604 1449DC85
  4B3D31E5 1B3E6A17 606AF333 3D3B4C73 E8300D06 092A8648 86F70D01 010B0500
  03820101 00507F24 D3932A66 86025D9F E838AE5C 6D4DF6B0 49631C78 240DA905
  604EDCDE FF4FED2B 77FC460E CD636FDB DD44681E 3A5673AB 9093D3B1 6C9E3D8B
  D98987BF E40CBD9E 1AECA0C2 2189BB5C 8FA85686 CD98B646 5575B146 8DFC66A8
  467A3DF4 4D565700 6ADF0F0D CF835015 3C04FF7C 21E878AC 11BA9CD2 55A9232C
  7CA7B7E6 C1AF74F6 152E99B7 B1FCF9BB E973DE7F 5BDDEB86 C71E3B49 1765308B
  5FB0DA06 B92AFE7F 494E8A9E 07B85737 F3A58BE1 1A48A229 C37C1E69 39F08678
  80DDCD16 D6BACECA EEBC7CF9 8428787B 35202CDC 60E4616A B623CDBD 230E3AFB
  418616A9 4093E049 4D10AB75 27E86F73 932E35B5 8862FDAE 0275156F 719BB2F0
  D697DF7F 28
  	quit
crypto pki certificate chain TP-self-signed-3740463209
!
!
!
!
!
!
!
!
!
license udi pid C8000V sn XXXXXXXXXXXX
license boot level network-advantage addon dna-advantage
memory free low-watermark processor 225161
diagnostic bootup level minimal
!
!
spanning-tree extend system-id
!
!
enable secret 9 $9$REDACTED
!
username admin privilege 15 secret 9 $9$REDACTED
username readonly secret 9 $9$REDACTED
!
redundancy
bfd-template single-hop BFD-OSPF
 interval min-tx 100 min-rx 100 multiplier 3
!
!
!
!
!
!
cdp run
!
!
track 1 ip sla 1 reachability
lldp run
!
class-map match-any BULK-DATA
 match dscp af11
class-map match-any CRITICAL-DATA
 match dscp af31
 match dscp cs3
class-map match-any VIDEO
 match dscp af41
 match dscp af42
class-map match-any VOICE
 match dscp ef
 match dscp cs5
!
policy-map WAN-EGRESS
 class VOICE
  priority percent 10
 class VIDEO
  bandwidth percent 20
 class CRITICAL-DATA
  bandwidth percent 25
 class BULK-DATA
  bandwidth percent 15
 class class-default
  bandwidth percent 30
policy-map WAN-SHAPE
 class class-default
  shape average 100000000
  service-policy WAN-EGRESS
!
interface Loopback0
 ip address 198.51.100.4 255.255.255.255
 ip pim sparse-mode
 ip igmp version 3
 ip ospf network point-to-point
 ipv6 address 2001:DB8::4/128
 ospfv3 1 ipv6 area 2
!
interface Loopback100
 vrf forwarding CUSTOMER-A
 ip address 10.100.4.4 255.255.255.255
!
interface Tunnel100
 description DMVPN-SPOKE
 ip address 172.16.0.4 255.255.255.0
 no ip redirects
 ip pim sparse-mode
 ip nhrp network-id 100
 ip nhrp nhs 172.16.0.1 nbma 198.51.100.1 multicast
 ipv6 address 2001:DB8:100::4/64
 ipv6 nhrp network-id 100
 ipv6 nhrp nhs 2001:DB8:100::1 nbma 198.51.100.1 multicast
 tunnel source Loopback0
 tunnel mode gre multipoint
 tunnel key 100
!
interface GigabitEthernet1
 description Link to R7 Gi2
 ip address 10.0.47.1 255.255.255.252
 ip pim sparse-mode
 ip ospf network point-to-point
 ip ospf 1 area 4
 negotiation auto
 cdp enable
 bfd template BFD-OSPF
 no mop enabled
 no mop sysid
!
interface GigabitEthernet2
 ip address 10.0.24.2 255.255.255.252
 ip pim sparse-mode
 ip ospf network point-to-point
 negotiation auto
 cdp enable
 ipv6 address 2001:DB8:24::2/64
 ospfv3 network point-to-point
 ospfv3 1 ipv6 area 0
 bfd template BFD-OSPF
 no mop enabled
 no mop sysid
!
interface GigabitEthernet3
 description LAN Interface
 ip address 10.4.0.1 255.255.255.0
 ip pim sparse-mode
 ip igmp version 3
 negotiation auto
 cdp enable
 ipv6 address 2001:DB8:4::1/64
 ospfv3 1 ipv6 area 2
 no mop enabled
 no mop sysid
!
interface GigabitEthernet4
 ip address 10.255.255.14 255.255.255.0
 negotiation auto
 no mop enabled
 no mop sysid
!
interface GigabitEthernet5
 description Link to R3 Gi5
 ip address 10.0.34.2 255.255.255.252
 ip pim sparse-mode
 ip ospf network point-to-point
 ip ospf 1 area 0
 negotiation auto
 cdp enable
 ipv6 address 2001:DB8:34::2/64
 ospfv3 network point-to-point
 ospfv3 1 ipv6 area 0
 no mop enabled
 no mop sysid
!
router eigrp DMVPN
 !
 address-family ipv4 unicast autonomous-system 100
  !
  topology base
  exit-af-topology
  network 10.4.0.0 0.0.0.255
  network 172.16.0.0 0.0.0.255
 exit-address-family
 !
 address-family ipv6 unicast autonomous-system 100
  !
  topology base
  exit-af-topology
 exit-address-family
!
router ospfv3 1
 router-id 198.51.100.4
 !
 address-family ipv6 unicast
  area 2 stub
 exit-address-family
!
router ospf 1
 router-id 198.51.100.4
 area 4 stub no-summary
 passive-interface GigabitEthernet3
 network 10.0.24.0 0.0.0.3 area 2
 network 10.4.0.0 0.0.0.255 area 2
 network 198.51.100.4 0.0.0.0 area 2
 bfd all-interfaces
!
router bgp 65000
 bgp router-id 198.51.100.4
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
 neighbor 198.51.100.1 remote-as 65000
 neighbor 198.51.100.1 update-source Loopback0
 !
 address-family ipv4
  neighbor 198.51.100.1 activate
 exit-address-family
 !
 address-family ipv6
  neighbor 198.51.100.1 activate
  network 2001:DB8::4/128
  network 2001:DB8:4::/64
 exit-address-family
 !
!
ip route 0.0.0.0 0.0.0.0 10.255.255.1
ip route 10.100.1.0 255.255.255.0 10.0.34.1 250
ip route 10.100.2.0 255.255.255.0 10.0.34.1 250
ip route 10.200.0.0 255.255.255.252 10.0.34.1 250
ip route 172.20.20.0 255.255.255.0 10.0.34.1
ntp authenticate
ntp source Loopback0
ntp server 1.1.1.1 source Loopback0
ntp server 10.255.255.1
ntp server pool.ntp.org
!
ip forward-protocol nd
!
ip pim ssm default
no ip http server
ip http authentication local
no ip http secure-server
ip ssh bulk-mode 131072
!
!
ip access-list standard SNMP-ACL
 10 permit 10.255.255.0 0.0.0.255
 20 permit 203.0.113.0 0.0.0.255
 30 deny any log
ip access-list standard VTY-ACL
 10 permit 10.255.255.0 0.0.0.255
 20 permit 203.0.113.0 0.0.0.255
 30 deny any log
!
ip sla 1
 icmp-echo 1.1.1.1 source-ip 4.4.4.4
  frequency 5
ip sla schedule 1 life forever start-time now
logging origin-id hostname
logging source-interface GigabitEthernet4
logging host 203.0.113.57 transport tcp port 5514 session-id hostname
!
!
!
!
!
!
control-plane
!
!
mgcp behavior rsip-range tgcp-only
mgcp behavior comedia-role none
mgcp behavior comedia-check-media-src disable
mgcp behavior comedia-sdp-force disable
!
mgcp profile default
!
!
!
!
!
banner login ^CC AUTHORIZED ACCESS ONLY - All activities are monitored ^C
!
line con 0
 exec-timeout 0 0
 stopbits 1
line aux 0
 no exec
line vty 0 4
 access-class VTY-ACL in
 exec-timeout 0 0
 transport input ssh
line vty 5 15
 transport input ssh
!
!
!
!
!
!
!
telemetry ietf subscription 100
 encoding encode-kvgpb
 filter xpath /interfaces-ios-xe-oper:interfaces/interface/statistics
 source-address 10.255.255.14
 stream yang-push
 update-policy periodic 5000
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
telemetry ietf subscription 101
 encoding encode-kvgpb
 filter xpath /process-cpu-ios-xe-oper:cpu-usage/cpu-utilization/five-seconds
 source-address 10.255.255.14
 stream yang-push
 update-policy periodic 5000
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
telemetry ietf subscription 102
 encoding encode-kvgpb
 filter xpath /memory-ios-xe-oper:memory-statistics/memory-statistic
 source-address 10.255.255.14
 stream yang-push
 update-policy periodic 5000
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
telemetry ietf subscription 103
 encoding encode-kvgpb
 filter xpath /interfaces-ios-xe-oper:interfaces/interface/oper-status
 stream yang-push
 update-policy on-change
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
telemetry ietf subscription 104
 encoding encode-kvgpb
 filter xpath /process-cpu-ios-xe-oper:cpu-usage/cpu-utilization/five-seconds
 stream yang-push
 update-policy periodic 10000
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
telemetry ietf subscription 105
 encoding encode-kvgpb
 filter xpath /memory-ios-xe-oper:memory-statistics/memory-statistic
 stream yang-push
 update-policy periodic 30000
 receiver ip address 203.0.113.62 57000 protocol grpc-tcp
netconf-yang
restconf
end