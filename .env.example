# =============================================================================
# NetworkOps - AI-Powered Network Automation
# =============================================================================
# Copy this file to .env and configure for your environment
# NEVER commit .env to version control!
#
# Documentation: https://github.com/yourorg/networkops#configuration
# =============================================================================

# =============================================================================
# REQUIRED SETTINGS
# =============================================================================

# Network Device Credentials
# Used for SSH/NETCONF connections to all managed devices
DEVICE_USERNAME=admin
DEVICE_PASSWORD=your_secure_password

# JWT Authentication Secret
# IMPORTANT: Generate a unique secret for production!
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET=change-this-to-a-random-64-character-string

# Demo Mode — Run without real network devices
# Set to 'true' to use simulated devices for testing and evaluation
DEMO_MODE=false

# =============================================================================
# DASHBOARD SETTINGS
# =============================================================================

# JWT token lifetime (hours)
JWT_EXPIRATION_HOURS=24

# Frontend URL (for CORS)
DASHBOARD_ORIGIN=http://localhost:3000

# API Server URL (used by frontend)
REACT_APP_API_URL=http://localhost:5001
REACT_APP_WS_URL=http://localhost:5001

# Flask configuration
FLASK_ENV=production
FLASK_DEBUG=0

# Logging
# LOG_LEVEL=INFO                          # DEBUG, INFO, WARNING, ERROR
# LOG_FORMAT=json                         # json or text

# Rate limiting (Flask-Limiter format)
# RATE_LIMIT_AUTH=10 per minute           # Login/register endpoints
# RATE_LIMIT_COMMANDS=60 per minute       # Device command execution

# Password policy
# ENFORCE_PASSWORD_CHANGE=true            # Require password change on first login

# =============================================================================
# AI FEATURES (Optional)
# =============================================================================

# Anthropic API Key - Required for RAG chatbot
# Get your key at: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-...

# RAG Configuration
# RAG_CHUNK_SIZE=500
# RAG_CHUNK_OVERLAP=50
# RAG_TOP_K=5

# MCP Server auth token (optional — for restricting MCP access)
# MCP_AUTH_TOKEN=

# =============================================================================
# DEVICE INVENTORY
# =============================================================================

# Device IP addresses - Override defaults from config/devices.py
# Isolated Lab Network: 10.255.255.0/24

# Routers
# R1_HOST=10.255.255.11
# R2_HOST=10.255.255.12
# R3_HOST=10.255.255.13
# R4_HOST=10.255.255.14

# Switches
# SWITCH_R1_HOST=10.255.255.21
# SWITCH_R2_HOST=10.255.255.22
# SWITCH_R4_HOST=10.255.255.24

# Linux Hosts
# ALPINE_1_HOST=10.255.255.110
# DOCKER_1_HOST=10.255.255.111

# IPsec Pre-Shared Key for DMVPN
# IPSEC_PSK=your_psk_here

# =============================================================================
# SNMP CONFIGURATION
# =============================================================================

# Default SNMP version: v2c or v3
SNMP_VERSION=v2c

# SNMPv2c community strings
SNMP_COMMUNITY_READ=public
SNMP_COMMUNITY_WRITE=private

# SNMPv3 credentials (if SNMP_VERSION=v3)
# SNMP_V3_USERNAME=snmpuser
# SNMP_V3_AUTH_PASSWORD=authpassword
# SNMP_V3_PRIV_PASSWORD=privpassword
# SNMP_V3_AUTH_PROTOCOL=sha256   # none, md5, sha, sha224, sha256, sha384, sha512
# SNMP_V3_PRIV_PROTOCOL=aes128   # none, des, aes128, aes192, aes256

# Containerlab VM name (Multipass)
CONTAINERLAB_VM=containerlab
CONTAINERLAB_TOPOLOGY_PATH=/home/ubuntu/datacenter/datacenter.clab.yml

# =============================================================================
# EVE-NG INTEGRATION (Automated Provisioning)
# =============================================================================

# EVE-NG server connection
# EVE-NG server IP (set to your EVE-NG instance)
EVE_NG_HOST=
EVE_NG_USERNAME=admin
EVE_NG_PASSWORD=

# Default lab for provisioning (URL-encoded path works too)
EVE_NG_LAB_PATH=/NetworkOps Lab.unl

# =============================================================================
# NETBOX INTEGRATION (Optional)
# =============================================================================

# Enable NetBox as device inventory source
USE_NETBOX=false
NETBOX_URL=http://localhost:8000
NETBOX_API_TOKEN=your_netbox_api_token

# Cache TTL in seconds
# NETBOX_CACHE_TTL=300

# =============================================================================
# MEMORY SYSTEM (MCP Server)
# =============================================================================

# Retention and limits
# MEMORY_RETENTION_DAYS=30          # Delete records older than this (0 = disable)
# MEMORY_MAX_TOOL_CALLS=5000        # Max tool call records to keep
# MEMORY_MAX_CONVERSATIONS=1000     # Max conversation records
# MEMORY_MAX_DEVICE_STATES=1000     # Max device state records
# MEMORY_MAX_CHROMADB_DOCS=5000     # Max semantic search documents

# Backup configuration
# MEMORY_BACKUP_DIR=data/backups    # Backup file location
# MEMORY_MAX_BACKUPS=5              # Number of backups to retain

# Context injection settings
# MEMORY_CONTEXT_LIMIT=5            # Max context items per tool call
# MEMORY_TIME_WINDOW_MINUTES=60     # Context time window

# Features
# MEMORY_ENABLE_SEMANTIC=true       # Enable ChromaDB semantic search
# MEMORY_AUTO_PRUNE=true            # Run maintenance on server startup

# =============================================================================
# DISCORD CHATOPS (Optional)
# =============================================================================

# Discord bot token from Discord Developer Portal
# DISCORD_BOT_TOKEN=your_discord_bot_token

# Bot settings
# COMMAND_PREFIX=!
# ALLOWED_CHANNELS=network-ops,automation
# ADMIN_ROLE=Network Admin

# Alerting
# ALERT_CHANNEL_ID=                 # Channel ID for health alerts
# HEALTH_CHECK_INTERVAL=300         # Seconds between health checks

# Webhook for notifications
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...

# =============================================================================
# OBSERVABILITY & MONITORING
# =============================================================================

# Model Driven Telemetry (gRPC collector as separate container)
# MDT_EXTERNAL=false                      # Set true to use standalone MDT collector

# Device metrics collection interval (seconds)
# DEVICE_METRICS_INTERVAL=30

# =============================================================================
# REDIS CACHING (Optional - for enterprise scale)
# =============================================================================

# Redis connection URL
# Start Redis with: docker-compose -f docker-compose.redis.yml up -d
REDIS_URL=redis://localhost:6379/0

# MCP Server parallelism (increase with connection pooling)
# MAX_CONCURRENT_CONNECTIONS=5

# Enable/disable connection pooling
# USE_CONNECTION_POOL=true

# =============================================================================
# CELERY ASYNC JOBS (Phase 2)
# =============================================================================

# Celery broker and backend
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# =============================================================================
# DATABASE
# =============================================================================

# All application data is stored in a single consolidated database.
# Default (SQLite): sqlite:///data/networkops.db  (no config needed)
# Production (PostgreSQL): set DATABASE_URL below
#
# IMPORTANT: Change password in production!
POSTGRES_PASSWORD=networkops_dev
# DATABASE_URL=postgresql://networkops:${POSTGRES_PASSWORD}@localhost:5432/networkops
#
# Run migrations after first setup or upgrade:
#   alembic upgrade head

# =============================================================================
# MONITORING UIS (Phase 2)
# =============================================================================

# Flower (Celery monitoring) - accessible at /flower/
FLOWER_USER=admin
FLOWER_PASSWORD=change-me-in-production

# pgAdmin (Database UI) - accessible at port 5050
PGADMIN_EMAIL=admin@networkops.local
PGADMIN_PASSWORD=change-me-in-production

# =============================================================================
# HASHICORP VAULT (Enterprise Secrets Management)
# =============================================================================

# Enable Vault integration (false = use .env for secrets)
USE_VAULT=false

# Vault server address
VAULT_ADDR=http://localhost:8200

# Token auth (for development)
# VAULT_TOKEN=hvs.your_dev_token

# AppRole auth (for production)
# VAULT_ROLE_ID=your_role_id
# VAULT_SECRET_ID=your_secret_id

# Vault configuration
# VAULT_MOUNT_PATH=secret          # KV v2 mount path
# VAULT_NAMESPACE=                 # Enterprise namespace (optional)
# VAULT_CACHE_TTL=300              # Cache secrets for 5 minutes

# =============================================================================
# MFA CONFIGURATION (Multi-Factor Authentication)
# =============================================================================

# Enable/disable MFA globally
MFA_ENABLED=true

# Encryption key for TOTP secrets (32-byte Fernet key)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# IMPORTANT: Generate a unique key for production!
MFA_ENCRYPTION_KEY=

# Issuer name shown in authenticator apps
MFA_ISSUER_NAME=NetworkOps

# =============================================================================
# SESSION MANAGEMENT
# =============================================================================

# Enable single session mode (new login invalidates previous sessions)
SINGLE_SESSION_ENABLED=true

# Maximum session age in hours (sessions older than this are cleaned up)
SESSION_MAX_AGE_HOURS=168

# =============================================================================
# SIEM LOG FORWARDING (Security Information and Event Management)
# =============================================================================

# Enable SIEM log forwarding
SIEM_ENABLED=false

# SIEM backend: splunk, elasticsearch, syslog, webhook
SIEM_BACKEND=splunk

# Batching configuration
# SIEM_BATCH_SIZE=10              # Events per batch
# SIEM_FLUSH_INTERVAL=5.0         # Seconds between flushes

# --- Splunk HEC Configuration ---
# SIEM_SPLUNK_URL=https://splunk.example.com:8088
# SIEM_SPLUNK_TOKEN=your-hec-token
# SIEM_SPLUNK_INDEX=networkops
# SIEM_SPLUNK_SOURCE=networkops-api
# SIEM_SPLUNK_SOURCETYPE=networkops:events
# SIEM_SPLUNK_VERIFY_SSL=true

# --- Elasticsearch Configuration ---
# SIEM_ELASTICSEARCH_URL=https://elasticsearch.example.com:9200
# SIEM_ELASTICSEARCH_INDEX=networkops-events
# SIEM_ELASTICSEARCH_USERNAME=elastic
# SIEM_ELASTICSEARCH_PASSWORD=your-password
# SIEM_ELASTICSEARCH_API_KEY=             # Alternative to username/password
# SIEM_ELASTICSEARCH_VERIFY_SSL=true

# --- Syslog Configuration (RFC 5424) ---
# SIEM_SYSLOG_HOST=syslog.example.com
# SIEM_SYSLOG_PORT=514
# SIEM_SYSLOG_PROTOCOL=udp                # udp or tcp
# SIEM_SYSLOG_FACILITY=local0

# --- Webhook Configuration ---
# SIEM_WEBHOOK_URL=https://your-siem.example.com/api/events
# SIEM_WEBHOOK_AUTH_HEADER=Authorization
# SIEM_WEBHOOK_AUTH_VALUE=Bearer your-api-token
# SIEM_WEBHOOK_VERIFY_SSL=true

# =============================================================================
# UI FEATURES
# =============================================================================

# Enable hierarchical site view (4-level drill-down: Region > Site > Rack > Device)
# Set to 'true' for enterprise-scale networks with 1000+ devices
ENABLE_HIERARCHICAL_VIEW=false

# =============================================================================
# PRODUCTION DEPLOYMENT (Phase 3)
# =============================================================================

# App version (shown in /healthz endpoint)
APP_VERSION=2.0.0

# SocketIO async mode (use 'gevent' with Gunicorn)
SOCKETIO_ASYNC_MODE=gevent

# =============================================================================
# DOCKER DEPLOYMENT
# =============================================================================

# Compose project name
# COMPOSE_PROJECT_NAME=networkops

# Data persistence paths (relative to project root)
# DATA_PATH=./data
# BASELINES_PATH=./baselines
